/* ==============================
   Club RAMPET – styles.css
   ============================== */

/* ───────── Variables y base ───────── */
:root{
  --primary:#007bff;
  --primary-600:#0069d9;
  --bg:#f6f7fb;
  --text:#222;
  --muted:#666;
  --card:#fff;
  --border:#e5e7eb;
  --border-color: var(--border);
  --success:#16a34a;
  --warning:#f59e0b;
  --error:#dc2626;
  --info:#0ea5e9;
  --radius:12px;
  --shadow:0 8px 24px rgba(0,0,0,.06);
  --ring:0 0 0 3px rgba(0,123,255,.2);
}

*{box-sizing:border-box;}
html,body{height:100%;}
body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

a{color:var(--primary);text-decoration:none;}
a:hover{text-decoration:underline;}
img{max-width:100%;}

/* ───────── Layout app ───────── */
.container{
  max-width:400px; /* diseño compacto */
  margin:0 auto;
  padding:16px;
}

header{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:12px 14px;
  display:flex;
  align-items:center;
  gap:12px;
}
header .logo{height:40px;width:auto;}
header h1{font-size:1.25rem;margin:0;flex:1;}
#install-entrypoint{ margin-left:auto; }

/* Campanita */
#btn-notifs{
  position:relative;
  border:1px solid var(--border);
  background:#fff;
  border-radius:999px;
  padding:8px 12px;
  cursor:pointer;
}
#btn-notifs:hover{background:#fafafa;}
#notif-counter{
  display:none;
  position:absolute;
  top:-6px; right:-6px;
  background:crimson;
  color:#fff;
  border-radius:999px;
  font-size:.72rem;
  line-height:1;
  padding:2px 6px;
  border:2px solid #fff;
}
@keyframes bellBlink {
  0%,100%{ transform: rotate(0deg); filter: brightness(1); }
  25%{    transform: rotate(-12deg); filter: brightness(1.06); }
  50%{    transform: rotate(0deg);  filter: brightness(1); }
  75%{    transform: rotate(12deg);  filter: brightness(1.06); }
}
#btn-notifs.blink { animation: bellBlink 1.2s ease-in-out 6; }

/* ───────── Pantallas ───────── */
.screen{display:none;margin-top:14px;}
.screen.active{display:block;}

.user-header{
  display:flex;align-items:center;gap:10px;flex-wrap:wrap;
}
.user-header h3{margin:0;font-size:1.05rem;flex:1;}
.user-actions{margin-left:auto;display:flex;gap:8px;}

/* ───────── Botones ───────── */
.primary-btn, .secondary-btn, button{
  font:inherit; cursor:pointer;
  border-radius:10px; padding:10px 14px; border:1px solid transparent;
  transition:transform .02s ease, background .15s ease, border-color .15s ease;
}
.primary-btn{
  background:var(--primary); color:#fff; border-color:var(--primary);
}
.primary-btn:hover{background:var(--primary-600);}
.primary-btn:active{transform:translateY(1px);}
.secondary-btn{
  background:#fff; color:#111; border-color:var(--border);
}
.secondary-btn:hover{background:#f8f8f8;}
button[disabled]{opacity:.6;cursor:not-allowed}

/* ───────── Formularios ───────── */
.form-group{display:flex;flex-direction:column;gap:10px; margin-top:10px;}
input, select{
  width:100%; height:42px; padding:10px 12px;
  border:1px solid var(--border); border-radius:10px;
  background:#fff; color:#111;
}
input::placeholder{color:#999;}
input:focus, select:focus{outline:none; box-shadow:var(--ring); border-color:var(--primary);}
label{font-size:.92rem; color:#333;}
.toggle-link{font-size:.92rem;color:#444;margin:0;}
.terms-container{display:flex;gap:8px;align-items:flex-start;font-size:.92rem;color:#444;}

/* ───────── Cards ───────── */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px;
  margin-top:12px;
}
.info-banner{background:#f0f7ff;border-color:#d7e7ff;}
.warning-banner{background:#fff7ed;border-color:#fde2c5;}
.terms-banner{background:#fffbe6;border-color:#f5e9b8;}
.small-note{font-size:.88rem; color:#666;}

/* Puntos */
.puntos-card{
  text-align:center;
  background:linear-gradient(45deg, var(--primary), var(--primary-600));
  color:#fff;
}
.puntos-card p{ margin:0 0 5px; font-size:16px; color:rgba(255,255,255,.85); }
.puntos-card h2{ font-size:3em; margin:0; font-weight:700; }

/* Vencimientos */
.vencimiento-card{ background:var(--error); color:#fff; text-align:center; }
.vencimiento-card p{ color:rgba(255,255,255,.9); margin:0; }
.vencimiento-card h2{ font-size:2.5em; margin:5px 0; }
.venc-list{margin:.5rem 0 0; padding-left:1rem; color:#fff;}
.venc-empty{color:#ffe8e8;}

/* Saldo */
#saldo-card .info-message{color:#666; font-size:.9rem;}

/* ───────── Grilla domicilio ───────── */
.grid-2{ display:grid; grid-template-columns:1fr; gap:10px; }
@media (min-width:560px){ .grid-2{grid-template-columns:1fr 1fr;} }
.address-card h3{margin:0 0 4px;}
.address-card .sub{margin:0 0 12px; color:#555; font-size:.95rem;}
.address-card .actions{margin-top:10px;}

/* ───────── Switch genérico ───────── */
.switch{position:relative; display:inline-block; width:48px; height:28px;}
.switch input{opacity:0;width:0;height:0;}
.slider{
  position:absolute; inset:0; background:#d1d5db; border-radius:999px; transition:.2s;
}
.slider:before{
  content:""; position:absolute; height:22px; width:22px; left:3px; top:3px;
  background:#fff; border-radius:999px; transition:.2s; box-shadow:0 1px 2px rgba(0,0,0,.15);
}
input:checked + .slider{background:var(--primary);}
input:checked + .slider:before{transform:translateX(20px);}
.slider.round{border-radius:999px;}
.slider.round:before{border-radius:999px;}

/* ───────── Carrusel ───────── */
:root{
  --slide-h:240px;
  --slide-w:80vw;
  --slide-max-w:380px;
  --wm-size:68%;
  --wm-opacity:.12;
}
@media (min-width:480px){ :root{ --slide-w:320px; } }

.carrusel-container{margin-top:12px;}

.carrusel{
  display:flex; gap:12px;
  overflow-x:auto;
  padding:8px 10px 12px;
  scroll-snap-type:x mandatory;
  scroll-padding-left:  calc((100% - min(var(--slide-w), var(--slide-max-w)))/2);
  scroll-padding-right: calc((100% - min(var(--slide-w), var(--slide-max-w)))/2);
  -webkit-overflow-scrolling:touch;
  scrollbar-width:none;
  overscroll-behavior-x: contain;
  touch-action: pan-x;
}
.carrusel::-webkit-scrollbar{ display:none; }

.banner-item,
.banner-item-texto{
  flex:0 0 var(--slide-w);
  max-width:var(--slide-max-w);
  height:var(--slide-h);
  border-radius:12px;
  overflow:hidden;
  box-shadow:var(--shadow);
  border:1px solid var(--border);
  background:#fff;
  position:relative;
  scroll-snap-align:center;
  scroll-snap-stop:always;
  user-select:none;
  -webkit-user-drag:none;
  cursor:grab;
}
.carrusel.arrastrando .banner-item,
.carrusel.arrastrando .banner-item-texto{ cursor:grabbing; }

/* imágenes más chicas (contain) */
.banner-con-imagen{ position:relative; display:block; height:100%; }
.banner-con-imagen > img{
  width:100%; height:100%;
  object-fit: contain;           /* clave: no recorta */
  display:block;
  border-radius:12px;
  background:#f8fafc;           /* marco suave */
  pointer-events:none;
  user-select:none;
  -webkit-user-drag:none;
}

/* overlay de texto opcional sobre imagen */
.banner-texto-overlay{
  position:absolute; left:0; right:0; bottom:0;
  padding:14px;
  background:linear-gradient(to top, rgba(0,0,0,.65), rgba(0,0,0,0));
  color:#fff; text-align:left;
}
.banner-texto-overlay h4{ margin:0 0 4px; font-weight:700; }
.banner-texto-overlay p{ margin:0; opacity:.95; }

/* diapositivas de sólo texto con marca de agua */
.banner-item-texto{
  display:flex; align-items:center; justify-content:center;
  text-align:center; padding:14px; isolation:isolate;
  background:#f8fafc;
}
.banner-item-texto::before{
  content:""; position:absolute; inset:0; z-index:0; pointer-events:none;
  background:center / var(--wm-size) no-repeat url("images/mi_logo.png");
  opacity:var(--wm-opacity);
  filter:grayscale(1);
}
.banner-item-texto > *{ position:relative; z-index:1; }
.banner-item-texto h4{ margin:0 0 6px; color:var(--primary); }
.banner-item-texto p{ margin:0; color:#444; }

/* Indicadores */
.carrusel-indicadores{ display:flex; gap:6px; justify-content:center; margin-top:8px; }
.carrusel-indicadores .indicador{
  width:8px; height:8px; border-radius:50%;
  background:#ccc; margin:0 4px; cursor:pointer; transition:background-color .2s;
}
.carrusel-indicadores .indicador.activo{ background: var(--primary); }

/* ───────── Toasts ───────── */
#toast-container{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:16px; z-index:9999; display:flex; flex-direction:column; gap:8px;
}
.toast{
  padding:10px 14px; border-radius:10px; color:#111; background:#fff;
  border:1px solid var(--border); box-shadow:var(--shadow);
  min-width:260px; max-width:90vw;
  animation:slideUp .25s ease-out;
}
.toast.info{border-color:#bae6fd;background:#eef9ff;}
.toast.success{border-color:#bbf7d0;background:#f0fdf4;}
.toast.warning{border-color:#fde68a;background:#fffbeb;}
.toast.error{border-color:#fecaca;background:#fef2f2;}
@keyframes slideUp{from{transform:translate(-50%,10px);opacity:0;}to{transform:translate(-50%,0);opacity:1;}}

/* ───────── Modales ───────── */
.modal-overlay{
  position:fixed; inset:0; display:none;
  align-items:center; justify-content:center;
  background:rgba(0,0,0,.4); z-index:9990; padding:16px;
}
.modal-content{
  background:#fff; color:#111; border-radius:14px; border:1px solid var(--border);
  box-shadow:var(--shadow); width:100%; max-width:680px; padding:16px 16px 18px; position:relative;
}
.modal-close-btn{ position:absolute; right:10px; top:6px; font-size:22px; cursor:pointer; line-height:1; }
.terms-text-container{
  border:1px solid var(--border); border-radius:10px; padding:12px;
  background:#fafafa; color:#222; max-height:55vh; overflow:auto; margin:10px 0;
}

/* INBOX */
.inbox-item{ position:relative; outline:none; cursor:pointer; }
.inbox-item:focus-visible{ box-shadow:0 0 0 3px rgba(0,123,255,.35); }
.inbox-item.destacado{ background:#fffbe6; box-shadow:inset 0 0 0 2px #ffe58f; }
.inbox-item.destacado::before{
  content:""; position:absolute; left:0; top:0; bottom:0; width:4px; background:#fadb14; border-radius:12px 0 0 12px;
}
.chip-destacado{
  display:inline-block; font-size:12px; padding:2px 8px; border-radius:999px;
  background:#fff1b8; color:#613400; border:1px solid #ffe58f;
}
.inbox-title{font-size:1rem;}
.inbox-body{font-size:.95rem;}
.inbox-date{font-size:.82rem; color:#888;}

/* ───────── Historial & Premios ───────── */
#lista-historial{margin:0; padding-left:18px;}
#lista-historial li{margin:4px 0;}
#lista-premios-cliente{margin:0; padding-left:18px;}
#lista-premios-cliente li{margin:6px 0;}
#lista-premios-cliente li.canjeable .puntos-premio{color:var(--primary); font-weight:700;}
#lista-premios-cliente li.no-canjeable{color:#777;}

/* ───────── Footer ───────── */
.app-footer{ text-align:center; color:#666; font-size:.92rem; margin:18px 0 8px; }

/* ───────── Accesibilidad ───────── */
:focus-visible{outline:3px solid rgba(0,123,255,.35); outline-offset:2px;}
button:focus-visible, a:focus-visible, input:focus-visible, select:focus-visible{
  border-color:var(--primary); box-shadow:var(--ring);
}

/* ───────── Helpers ───────── */
.info-message{color:#555; font-size:.92rem;}
.muted{color:#888;}

/* ====== Dirección (banner + card + grid) ====== */
#address-banner{
  background:#FFFACD;
  border:1px solid #F0E68C;
  border-radius:12px;
  padding:12px 14px;
}
#address-banner p{ margin:0; color:#5c5c5c; }
#address-banner .primary-btn{ padding:8px 12px; }
#address-banner .secondary-btn{ padding:8px 12px; }

/* Card domicilio */
.card.address-card{
  background:#fff; border-radius:12px; padding:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.08); margin:16px 0;
  border:1px solid var(--border-color);
}
.card.address-card h3{ margin:0 0 6px; }
.card.address-card .sub{ margin:0 0 12px; color:#555; }
.card.address-card .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }
@media (max-width:520px){ .card.address-card .grid-2{ grid-template-columns:1fr; } }
.card.address-card input, .card.address-card select{
  width:100%; padding:12px; border:1px solid var(--border-color); border-radius:8px; font:inherit;
}
.card.address-card .actions{ display:flex; gap:8px; justify-content:flex-end; }

/* ====== Modal Perfil ====== */
/* Una sola versión: desplazable en pantallas chicas */
#profile-modal .modal-content{
  max-width:520px;
  max-height:85vh;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
  display:flex; flex-direction:column;
}
/* Botonera fija al pie del modal */
#profile-modal .modal-actions{
  position:sticky; bottom:0;
  background:#fff;
  padding-top:8px;
  margin-top:12px;
  border-top:1px solid var(--border);
}

/* ===== Preferencias (compacto y discreto) ===== */
.card.prefs-card{
  padding:8px 10px;
  border:1px dashed var(--border);
  background:#fff;
}
.card.prefs-card h3{
  margin:0 0 6px;
  font-size:.95rem;
  color:#444;
}
/* fila de preferencia compacta */
#profile-modal .profile-consent{
  display:grid;
  grid-template-columns:18px 1fr; /* check chico + texto */
  align-items:center;
  gap:8px;
  margin:2px 0;
  padding:0;
}
#profile-modal .profile-consent input[type="checkbox"]{
  width:16px; height:16px; margin:0;
  accent-color: var(--primary);
}
#profile-modal .profile-consent span{
  font-size:.9rem; line-height:1.25; color:#444;
}
.prefs-card .small-note{
  margin-top:4px; font-size:.78rem; color:#777; opacity:.9;
}
